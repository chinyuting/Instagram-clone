import{M as P,u as I,r as C,o as S,d as V,_ as L}from"./navComponent-jP7fjWho.js";import{z as B,r as u,p as N,o as M,a as n,c,A as p,t as _,B as $,d as A,b as t,s as D,x as m,F as y,f as E,g as w}from"./index-6IoASqTB.js";const F=B("postDataList",()=>{const o=u([]);function l(){const e=u(!0),i=localStorage.getItem("long-lived-access-token");N.get(`https://cors-anywhere.herokuapp.com/https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=${i}`).then(s=>{console.log(s),o.value=s.data.data,console.log("post",o.value),e.value=!1}).catch(s=>{console.log(s)})}return{postData:o,getPostData:l}}),U=$('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">Modal title</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">...</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Save changes</button></div></div></div>',1),x={__name:"profilePostModalComponent",props:{postId:String,mergedPostData:Array},setup(o,{expose:l}){const e=u(null),i=u(null);return l({showModal:function(){e.value.show()}}),M(()=>{e.value=new P(storyModal.value)}),(v,h)=>(n(),c("div",{class:"modal fade custom-modal",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref_key:"profilePostModal",ref:i},[p(_(o.postId)+" "+_(o.mergedPostData)+" ",1),U],512))}},z={class:"row mx-0"},O={class:"col m-0 border-start min-vh-100"},R={class:"profile mx-auto py-md-4 d-flex"},G={class:"rounded-circle profile-pic m-1 flex-shrink-0 p-1"},T=["src"],j={class:"align-self-center ms-5"},q={class:"d-flex my-1 align-self-center"},H={class:"userName p-2"},J=t("div",null,[t("button",{class:"btn btn-light",type:"button"},"編輯個人檔案")],-1),K=t("div",{class:"p-2 cursor-pointer"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear-wide",viewBox:"0 0 16 16"},[t("path",{d:"M8.932.727c-.243-.97-1.62-.97-1.864 0l-.071.286a.96.96 0 0 1-1.622.434l-.205-.211c-.695-.719-1.888-.03-1.613.931l.08.284a.96.96 0 0 1-1.186 1.187l-.284-.081c-.96-.275-1.65.918-.931 1.613l.211.205a.96.96 0 0 1-.434 1.622l-.286.071c-.97.243-.97 1.62 0 1.864l.286.071a.96.96 0 0 1 .434 1.622l-.211.205c-.719.695-.03 1.888.931 1.613l.284-.08a.96.96 0 0 1 1.187 1.187l-.081.283c-.275.96.918 1.65 1.613.931l.205-.211a.96.96 0 0 1 1.622.434l.071.286c.243.97 1.62.97 1.864 0l.071-.286a.96.96 0 0 1 1.622-.434l.205.211c.695.719 1.888.03 1.613-.931l-.08-.284a.96.96 0 0 1 1.187-1.187l.283.081c.96.275 1.65-.918.931-1.613l-.211-.205a.96.96 0 0 1 .434-1.622l.286-.071c.97-.243.97-1.62 0-1.864l-.286-.071a.96.96 0 0 1-.434-1.622l.211-.205c.719-.695.03-1.888-.931-1.613l-.284.08a.96.96 0 0 1-1.187-1.186l.081-.284c.275-.96-.918-1.65-1.613-.931l-.205.211a.96.96 0 0 1-1.622-.434zM8 12.997a4.998 4.998 0 1 1 0-9.995 4.998 4.998 0 0 1 0 9.996z"})])],-1),Q={class:"my-1 d-flex list-unstyled align-self-center"},W={class:"media_count profileData p-2"},X=t("span",null,"則貼文",-1),Y=t("li",{class:"media_count profileData p-2"},[p("0"),t("span",null,"位粉絲")],-1),Z=t("li",{class:"media_count profileData p-2"},[p("0"),t("span",null,"人追蹤中")],-1),tt={class:"row mx-auto border-top"},at=["onClick"],et={class:"post-pic position-absolute w-100 h-100"},st=["src"],ot=["src"],lt=t("button",{class:"btn"},null,-1),it={__name:"ProfileView",setup(o){const l=F(),e=I(),i=async()=>{await e.getUserData(),await l.getPostData()},s=u([]),v=C(V,"postsData");M(async()=>{await i(),S(v,d=>{const r=[];d.forEach(a=>{const f=a.key,b=a.val();e.userData.username===b.username&&r.push({key:f,...b})}),s.value=r})});const h=A(()=>[...l.postData,...s.value].sort((r,a)=>new Date(a.timestamp)-new Date(r.timestamp)));let g="";const k=function(d){g=d,x.value.showModal()};return(d,r)=>(n(),c(y,null,[t("div",z,[D(L),t("main",O,[t("div",R,[t("div",G,[t("img",{src:m(e).userData.media_url,alt:""},null,8,T)]),t("div",j,[t("div",q,[t("h4",H,_(m(e).userData.username),1),J,K]),t("ul",Q,[t("li",W,[p(_(m(e).userData.media_count),1),X]),Y,Z])])]),t("article",tt,[(n(!0),c(y,null,E(h.value,(a,f)=>(n(),c("div",{class:"mt-1 col-4 px-0 ps-1",key:f},[t("div",{class:"profile-post",onClick:b=>k(a.id)},[t("div",et,[a.media_type==="IMAGE"||a.media_type==="CAROUSEL_ALBUM"?(n(),c("img",{key:0,src:a.media_url,alt:""},null,8,st)):w("",!0),a.media_type==="VIDEO"?(n(),c("img",{key:1,src:a.thumbnail_url,alt:""},null,8,ot)):w("",!0)])],8,at)]))),128))]),lt])]),D(x,{postId:m(g),mergedPostData:h.value},null,8,["postId","mergedPostData"])],64))}};export{it as default};
