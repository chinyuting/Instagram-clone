import{M as P,p as I,u as $,r as C,o as L,d as V,_ as S}from"./postComponent-WF2rjNaR.js";import{s as B,r as d,j as E,o as k,a as c,c as i,x as _,t as b,b as t,l as w,F as y,d as N,m as p,e as A,p as x}from"./index-RxsljrUU.js";const F=B("postDataList",()=>{const a=d([]);function l(){const e=d(!0),n=localStorage.getItem("long-lived-access-token");E.get(`https://cors-anywhere.herokuapp.com/https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=${n}`).then(o=>{console.log(o),a.value=o.data.data,console.log("post",a.value),e.value=!1}).catch(o=>{console.log(o)})}return{postData:a,getPostData:l}}),U=t("button",{type:"button",class:"btn-close btn-close-white position-absolute top-0 end-0 m-3","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),O={class:"modal-dialog"},z={class:"modal-content"},R={class:"modal-body"},j={__name:"profilePostModalComponent",props:{postId:String,mergedPostData:Array},setup(a,{expose:l}){const e=d(null),n=d(null);l({showModal:function(){e.value.show()}}),k(()=>{e.value=new P(n.value,{backdrop:"static",keyboard:!1})});const h=a;return watch(()=>h.postId,r=>{postId.value=r}),(r,f)=>(c(),i(y,null,[_(b(a.postId)+" ",1),t("div",{class:"modal fade custom-modal",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref_key:"profilePostModal",ref:n},[U,t("div",O,[t("div",z,[t("div",R,[w(I,{postDataList:a.mergedPostData},null,8,["postDataList"])])])])],512)],64))}},G={class:"row mx-0"},T={class:"col m-0 border-start min-vh-100"},q={class:"profile mx-auto py-md-4 d-flex"},H={class:"rounded-circle profile-pic m-1 flex-shrink-0 p-1"},J=["src"],K={class:"align-self-center ms-5"},Q={class:"d-flex my-1 align-self-center"},W={class:"userName p-2"},X=t("div",null,[t("button",{class:"btn btn-light",type:"button"},"編輯個人檔案")],-1),Y=t("div",{class:"p-2 cursor-pointer"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear-wide",viewBox:"0 0 16 16"},[t("path",{d:"M8.932.727c-.243-.97-1.62-.97-1.864 0l-.071.286a.96.96 0 0 1-1.622.434l-.205-.211c-.695-.719-1.888-.03-1.613.931l.08.284a.96.96 0 0 1-1.186 1.187l-.284-.081c-.96-.275-1.65.918-.931 1.613l.211.205a.96.96 0 0 1-.434 1.622l-.286.071c-.97.243-.97 1.62 0 1.864l.286.071a.96.96 0 0 1 .434 1.622l-.211.205c-.719.695-.03 1.888.931 1.613l.284-.08a.96.96 0 0 1 1.187 1.187l-.081.283c-.275.96.918 1.65 1.613.931l.205-.211a.96.96 0 0 1 1.622.434l.071.286c.243.97 1.62.97 1.864 0l.071-.286a.96.96 0 0 1 1.622-.434l.205.211c.695.719 1.888.03 1.613-.931l-.08-.284a.96.96 0 0 1 1.187-1.187l.283.081c.96.275 1.65-.918.931-1.613l-.211-.205a.96.96 0 0 1 .434-1.622l.286-.071c.97-.243.97-1.62 0-1.864l-.286-.071a.96.96 0 0 1-.434-1.622l.211-.205c.719-.695.03-1.888-.931-1.613l-.284.08a.96.96 0 0 1-1.187-1.186l.081-.284c.275-.96-.918-1.65-1.613-.931l-.205.211a.96.96 0 0 1-1.622-.434zM8 12.997a4.998 4.998 0 1 1 0-9.995 4.998 4.998 0 0 1 0 9.996z"})])],-1),Z={class:"my-1 d-flex list-unstyled align-self-center"},tt={class:"media_count profileData p-2"},st=t("span",null,"則貼文",-1),et=t("li",{class:"media_count profileData p-2"},[_("0"),t("span",null,"位粉絲")],-1),at=t("li",{class:"media_count profileData p-2"},[_("0"),t("span",null,"人追蹤中")],-1),ot={class:"row mx-auto border-top"},lt=["onClick"],nt={class:"post-pic position-absolute w-100 h-100"},ct=["src"],it=["src"],dt=t("button",{class:"btn"},null,-1),mt={__name:"ProfileView",setup(a){const l=F(),e=$(),n=async()=>{await e.getUserData(),await l.getPostData()},o=d([]),h=C(V,"postsData");k(async()=>{await n(),L(h,u=>{const m=[];u.forEach(s=>{const v=s.key,D=s.val();e.userData.username===D.username&&m.push({key:v,...D})}),o.value=m})});const r=N(()=>[...l.postData,...o.value].sort((m,s)=>new Date(s.timestamp)-new Date(m.timestamp))),f=d(null);let g="";const M=function(u){g=u,console.log(g),f.value.showModal()};return(u,m)=>(c(),i(y,null,[t("div",G,[w(S),t("main",T,[t("div",q,[t("div",H,[t("img",{src:p(e).userData.media_url,alt:""},null,8,J)]),t("div",K,[t("div",Q,[t("h4",W,b(p(e).userData.username),1),X,Y]),t("ul",Z,[t("li",tt,[_(b(p(e).userData.media_count),1),st]),et,at])])]),t("article",ot,[(c(!0),i(y,null,A(r.value,(s,v)=>(c(),i("div",{class:"mt-1 col-4 px-0 ps-1",key:v},[t("div",{class:"profile-post",onClick:D=>M(s.id)},[t("div",nt,[s.media_type==="IMAGE"||s.media_type==="CAROUSEL_ALBUM"?(c(),i("img",{key:0,src:s.media_url,alt:""},null,8,ct)):x("",!0),s.media_type==="VIDEO"?(c(),i("img",{key:1,src:s.thumbnail_url,alt:""},null,8,it)):x("",!0)])],8,lt)]))),128))]),dt])]),w(j,{postId:p(g),mergedPostData:r.value,ref_key:"profilePostModal",ref:f},null,8,["postId","mergedPostData"])],64))}};export{mt as default};
