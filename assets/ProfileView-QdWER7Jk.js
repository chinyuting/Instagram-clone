import{u as y,r as k,o as x,d as V,_ as F}from"./navComponent-7TTQ0mJi.js";import{z as M,r as h,p as P,o as B,d as C,a as n,c as i,s as E,b as t,x as p,t as f,A as g,F as L,f as N,g as D}from"./index-gw0UdRvX.js";const S=M("postDataList",()=>{const r=h([]);function o(){const s=h(!0),d=localStorage.getItem("long-lived-access-token");P.get(`https://cors-anywhere.herokuapp.com/https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=${d}`).then(a=>{console.log(a),r.value=a.data.data,console.log("post",r.value),s.value=!1}).catch(a=>{console.log(a)})}return{postData:r,getPostData:o}}),A={class:"row mx-0"},I={class:"col m-0 border-start min-vh-100"},O={class:"profile mx-auto py-md-4 d-flex"},U={class:"rounded-circle profile-pic m-1 flex-shrink-0 p-1"},$=["src"],z={class:"align-self-center ms-5"},R={class:"d-flex my-1 align-self-center"},G={class:"userName p-2"},T=t("div",null,[t("button",{class:"btn btn-light",type:"button"},"編輯個人檔案")],-1),j=t("div",{class:"p-2 cursor-pointer"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear-wide",viewBox:"0 0 16 16"},[t("path",{d:"M8.932.727c-.243-.97-1.62-.97-1.864 0l-.071.286a.96.96 0 0 1-1.622.434l-.205-.211c-.695-.719-1.888-.03-1.613.931l.08.284a.96.96 0 0 1-1.186 1.187l-.284-.081c-.96-.275-1.65.918-.931 1.613l.211.205a.96.96 0 0 1-.434 1.622l-.286.071c-.97.243-.97 1.62 0 1.864l.286.071a.96.96 0 0 1 .434 1.622l-.211.205c-.719.695-.03 1.888.931 1.613l.284-.08a.96.96 0 0 1 1.187 1.187l-.081.283c-.275.96.918 1.65 1.613.931l.205-.211a.96.96 0 0 1 1.622.434l.071.286c.243.97 1.62.97 1.864 0l.071-.286a.96.96 0 0 1 1.622-.434l.205.211c.695.719 1.888.03 1.613-.931l-.08-.284a.96.96 0 0 1 1.187-1.187l.283.081c.96.275 1.65-.918.931-1.613l-.211-.205a.96.96 0 0 1 .434-1.622l.286-.071c.97-.243.97-1.62 0-1.864l-.286-.071a.96.96 0 0 1-.434-1.622l.211-.205c.719-.695.03-1.888-.931-1.613l-.284.08a.96.96 0 0 1-1.187-1.186l.081-.284c.275-.96-.918-1.65-1.613-.931l-.205.211a.96.96 0 0 1-1.622-.434zM8 12.997a4.998 4.998 0 1 1 0-9.995 4.998 4.998 0 0 1 0 9.996z"})])],-1),q={class:"my-1 d-flex list-unstyled align-self-center"},H={class:"media_count profileData p-2"},J=t("span",null,"則貼文",-1),K=t("li",{class:"media_count profileData p-2"},[g("0"),t("span",null,"位粉絲")],-1),Q=t("li",{class:"media_count profileData p-2"},[g("0"),t("span",null,"人追蹤中")],-1),W={class:"row mx-auto border-top"},X=["onClick"],Y={class:"post-pic position-absolute w-100 h-100"},Z=["src"],tt=["src"],et=t("button",{class:"btn"},null,-1),ot={__name:"ProfileView",setup(r){const o=S(),s=y();let d=1;const a=async()=>{console.log("fetchData start"),await s.getUserData(),await o.getPostData(),console.log("fetchData end")},v=function(l){console.log(l)},u=h([]),w=k(V,"postsData");B(async()=>{console.log("onMounted start"),await a(),x(w,l=>{console.log("onValue start");const c=[];l.forEach(e=>{const _=e.key,m=e.val();console.log(s.userData.id===m.postownerid),c.push({key:_,...m})}),u.value=c,console.log(u),console.log("onValue end")})});const b=C(()=>(console.log(o.postData,"postData",d),console.log(u.value,"postOwnerDataFromFirebase",d),[...o.postData,...u.value].sort((c,e)=>new Date(e.timestamp)-new Date(c.timestamp))));return(l,c)=>(n(),i("div",A,[E(F),t("main",I,[t("div",O,[t("div",U,[t("img",{src:p(s).userData.media_url,alt:""},null,8,$)]),t("div",z,[t("div",R,[t("h4",G,f(p(s).userData.username),1),T,j]),t("ul",q,[t("li",H,[g(f(p(s).userData.media_count),1),J]),K,Q])])]),t("article",W,[(n(!0),i(L,null,N(b.value,(e,_)=>(n(),i("div",{class:"mt-1 col-4 px-0 ps-1",key:_},[t("div",{class:"profile-post",onClick:m=>v(e.id)},[t("div",Y,[e.media_type==="IMAGE"||e.media_type==="CAROUSEL_ALBUM"?(n(),i("img",{key:0,src:e.media_url,alt:""},null,8,Z)):D("",!0),e.media_type==="VIDEO"?(n(),i("img",{key:1,src:e.thumbnail_url,alt:""},null,8,tt)):D("",!0)])],8,X)]))),128))]),et])]))}};export{ot as default};
