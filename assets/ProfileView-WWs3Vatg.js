import{r as h,d as g,o as x,p as F,_ as V}from"./navComponent-w8oSGyH0.js";import{y as v,r as y,s as b,b as i,d,m as E,e,q as _,t as f,z as p,F as N,i as S,j as D}from"./index-kJhfg1rT.js";const U=v("postDataList",()=>{const a=y([]);function n(){const o=localStorage.getItem("long-lived-access-token");b.get(`https://cors-anywhere.herokuapp.com/https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=${o}`).then(c=>{console.log(c),a.value=c.data.data,console.log("post",a.value)}).catch(c=>{console.log(c)})}return{postData:a,getPostData:n}}),$=v("userDataList",()=>{const a=y(null);async function n(){try{const s=localStorage.getItem("long-lived-access-token"),l=localStorage.getItem("user_id"),t=await b.get(`https://graph.instagram.com/${l}?fields=account_type,id,media_count,username&access_token=${s}`);a.value=t.data,o(t.data.id)}catch(s){console.error("Error fetching user data:",s)}}async function o(s){const l=h(g,"userData");x(l,async t=>{const r=[];t.forEach(u=>{const k=u.key,w=u.val();r.push({key:k,...w})});const m=r.find(u=>u.id===s);m||await c(s),a.value={...a.value,...m}})}async function c(s){const l=h(g,"userData"),t={id:s,media_url:"https://firebasestorage.googleapis.com/v0/b/instagram-imitation-180e8.appspot.com/o/user%2Fkarsten-winegeart-NE0XGVKTmcA-unsplash.jpg?alt=media&token=9f250d7f-e2e5-46fa-bad9-bcae3001951f",username:a.value.username};try{await F(l,t),console.log("Data successfully written to Firebase!")}catch(r){console.error("Error writing data to Firebase:",r)}}return{userData:a,getUserData:n}}),I={class:"row mx-0"},P={class:"col m-0 border-start min-vh-100"},B={class:"profile mx-auto py-md-4 d-flex"},C={class:"rounded-circle profile-pic m-1 flex-shrink-0 p-1"},z=["src"],L={class:"align-self-center ms-5"},M={class:"d-flex my-1 align-self-center"},j={class:"userName p-2"},A=e("div",null,[e("button",{class:"btn btn-light",type:"button"},"編輯個人檔案")],-1),G=e("div",{class:"p-2 cursor-pointer"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear-wide",viewBox:"0 0 16 16"},[e("path",{d:"M8.932.727c-.243-.97-1.62-.97-1.864 0l-.071.286a.96.96 0 0 1-1.622.434l-.205-.211c-.695-.719-1.888-.03-1.613.931l.08.284a.96.96 0 0 1-1.186 1.187l-.284-.081c-.96-.275-1.65.918-.931 1.613l.211.205a.96.96 0 0 1-.434 1.622l-.286.071c-.97.243-.97 1.62 0 1.864l.286.071a.96.96 0 0 1 .434 1.622l-.211.205c-.719.695-.03 1.888.931 1.613l.284-.08a.96.96 0 0 1 1.187 1.187l-.081.283c-.275.96.918 1.65 1.613.931l.205-.211a.96.96 0 0 1 1.622.434l.071.286c.243.97 1.62.97 1.864 0l.071-.286a.96.96 0 0 1 1.622-.434l.205.211c.695.719 1.888.03 1.613-.931l-.08-.284a.96.96 0 0 1 1.187-1.187l.283.081c.96.275 1.65-.918.931-1.613l-.211-.205a.96.96 0 0 1 .434-1.622l.286-.071c.97-.243.97-1.62 0-1.864l-.286-.071a.96.96 0 0 1-.434-1.622l.211-.205c.719-.695.03-1.888-.931-1.613l-.284.08a.96.96 0 0 1-1.187-1.186l.081-.284c.275-.96-.918-1.65-1.613-.931l-.205.211a.96.96 0 0 1-1.622-.434zM8 12.997a4.998 4.998 0 1 1 0-9.995 4.998 4.998 0 0 1 0 9.996z"})])],-1),R={class:"my-1 d-flex list-unstyled align-self-center"},T={class:"media_count profileData p-2"},q=e("span",null,"則貼文",-1),K=e("li",{class:"media_count profileData p-2"},[p("0"),e("span",null,"位粉絲")],-1),O=e("li",{class:"media_count profileData p-2"},[p("0"),e("span",null,"人追蹤中")],-1),X={class:"row mx-auto border-top"},H=["onClick"],J={class:"post-pic position-absolute w-100 h-100"},Q=["src"],W=["src"],Y=e("button",{class:"btn"},null,-1),te={__name:"ProfileView",setup(a){const n=U();n.getPostData();const o=$();o.getUserData();const c=function(s){console.log(s)};return(s,l)=>(i(),d("div",I,[E(V),e("main",P,[e("div",B,[e("div",C,[e("img",{src:_(o).userData.media_url,alt:""},null,8,z)]),e("div",L,[e("div",M,[e("h4",j,f(_(o).userData.username),1),A,G]),e("ul",R,[e("li",T,[p(f(_(o).userData.media_count),1),q]),K,O])])]),e("article",X,[(i(!0),d(N,null,S(_(n).postData,(t,r)=>(i(),d("div",{class:"mt-1 col-4 px-0 ps-1",key:r},[e("div",{class:"profile-post",onClick:m=>c(t.id)},[e("div",J,[t.media_type==="IMAGE"?(i(),d("img",{key:0,src:t.media_url,alt:""},null,8,Q)):D("",!0),t.media_type==="VIDEO"?(i(),d("img",{key:1,src:t.thumbnail_url,alt:""},null,8,W)):D("",!0)])],8,H)]))),128))]),Y])]))}};export{te as default};
