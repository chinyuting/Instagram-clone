import{M as I,p as $,u as L,r as C,o as S,d as E,_ as V}from"./postComponent-gtArBTsF.js";import{s as A,r as c,j as y,o as M,x as B,a as r,c as u,b as t,l as D,d as U,m as v,t as w,y as b,F as k,e as N,p as x}from"./index-JETaK72Z.js";const F=A("postDataList",()=>{const l=c([]);function d(){const n=c(!0),i=localStorage.getItem("long-lived-access-token");y.get(`https://cors-anywhere.herokuapp.com/https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=${i}`).then(e=>{console.log(e),l.value=e.data.data,console.log("post",l.value),l.value.forEach(o=>{console.log(o.media_type),o.media_type==="CAROUSEL_ALBUM"&&s(o.id)}),n.value=!1}).catch(e=>{console.log(e)})}function s(n){const i=localStorage.getItem("long-lived-access-token");y.get(`https://graph.instagram.com/${n}/children?access_token=${i}`).then(e=>{console.log(e.data)}).catch(e=>{console.log(e)})}return{postData:l,getPostData:d}}),O=t("button",{type:"button",class:"btn-close btn-close-white position-absolute top-0 end-0 m-3","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),R={class:"modal-dialog modal-dialog-scrollable"},z={class:"modal-content"},j={class:"modal-body"},G={__name:"profilePostModalComponent",props:{postId:String,mergedPostData:Array},setup(l,{expose:d}){const s=c(null),n=c(null);d({showModal:function(){s.value.show()}}),M(()=>{s.value=new I(n.value)});const e=l,o=c(null);return B(()=>e.postId,m=>{o.value=m}),(m,h)=>(r(),u("div",{class:"modal fade custom-modal",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref_key:"profilePostModal",ref:n},[O,t("div",R,[t("div",z,[t("div",j,[D($,{postDataList:l.mergedPostData,postIdDirection:o.value},null,8,["postDataList","postIdDirection"])])])])],512))}},T={class:"row mx-0"},q={class:"col m-0 border-start min-vh-100"},H={class:"profile mx-auto py-md-4 d-flex"},J={class:"rounded-circle profile-pic m-1 flex-shrink-0 p-1"},K=["src"],Q={class:"align-self-center ms-5"},W={class:"d-flex my-1 align-self-center"},X={class:"userName p-2"},Y=t("div",null,[t("button",{class:"btn btn-light",type:"button"},"編輯個人檔案")],-1),Z=t("div",{class:"p-2 cursor-pointer"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear-wide",viewBox:"0 0 16 16"},[t("path",{d:"M8.932.727c-.243-.97-1.62-.97-1.864 0l-.071.286a.96.96 0 0 1-1.622.434l-.205-.211c-.695-.719-1.888-.03-1.613.931l.08.284a.96.96 0 0 1-1.186 1.187l-.284-.081c-.96-.275-1.65.918-.931 1.613l.211.205a.96.96 0 0 1-.434 1.622l-.286.071c-.97.243-.97 1.62 0 1.864l.286.071a.96.96 0 0 1 .434 1.622l-.211.205c-.719.695-.03 1.888.931 1.613l.284-.08a.96.96 0 0 1 1.187 1.187l-.081.283c-.275.96.918 1.65 1.613.931l.205-.211a.96.96 0 0 1 1.622.434l.071.286c.243.97 1.62.97 1.864 0l.071-.286a.96.96 0 0 1 1.622-.434l.205.211c.695.719 1.888.03 1.613-.931l-.08-.284a.96.96 0 0 1 1.187-1.187l.283.081c.96.275 1.65-.918.931-1.613l-.211-.205a.96.96 0 0 1 .434-1.622l.286-.071c.97-.243.97-1.62 0-1.864l-.286-.071a.96.96 0 0 1-.434-1.622l.211-.205c.719-.695.03-1.888-.931-1.613l-.284.08a.96.96 0 0 1-1.187-1.186l.081-.284c.275-.96-.918-1.65-1.613-.931l-.205.211a.96.96 0 0 1-1.622-.434zM8 12.997a4.998 4.998 0 1 1 0-9.995 4.998 4.998 0 0 1 0 9.996z"})])],-1),tt={class:"my-1 d-flex list-unstyled align-self-center"},et={class:"media_count profileData p-2"},at=t("span",null,"則貼文",-1),st=t("li",{class:"media_count profileData p-2"},[b("0"),t("span",null,"位粉絲")],-1),ot=t("li",{class:"media_count profileData p-2"},[b("0"),t("span",null,"人追蹤中")],-1),lt={class:"row mx-auto border-top"},nt=["onClick"],ct={class:"post-pic position-absolute w-100 h-100"},it=["src"],dt=["src"],rt=t("button",{class:"btn"},null,-1),_t={__name:"ProfileView",setup(l){const d=F(),s=L(),n=async()=>{await s.getUserData(),await d.getPostData()},i=c([]),e=C(E,"postsData");M(async()=>{await n(),S(e,_=>{const p=[];_.forEach(a=>{const f=a.key,g=a.val();s.userData.username===g.username&&p.push({key:f,...g})}),i.value=p})});const o=U(()=>[...d.postData,...i.value].sort((p,a)=>new Date(a.timestamp)-new Date(p.timestamp))),m=c(null),h=c(""),P=function(_){h.value=_,m.value.showModal()};return(_,p)=>(r(),u(k,null,[t("div",T,[D(V),t("main",q,[t("div",H,[t("div",J,[t("img",{src:v(s).userData.media_url,alt:""},null,8,K)]),t("div",Q,[t("div",W,[t("h4",X,w(v(s).userData.username),1),Y,Z]),t("ul",tt,[t("li",et,[b(w(v(s).userData.media_count),1),at]),st,ot])])]),t("article",lt,[(r(!0),u(k,null,N(o.value,(a,f)=>(r(),u("div",{class:"mt-1 col-4 px-0 ps-1",key:f},[t("div",{class:"profile-post",onClick:g=>P(a.id)},[t("div",ct,[a.media_type==="IMAGE"||a.media_type==="CAROUSEL_ALBUM"?(r(),u("img",{key:0,src:a.media_url,alt:""},null,8,it)):x("",!0),a.media_type==="VIDEO"?(r(),u("img",{key:1,src:a.thumbnail_url,alt:""},null,8,dt)):x("",!0)])],8,nt)]))),128))]),rt])]),D(G,{postId:h.value,mergedPostData:o.value,ref_key:"profilePostModal",ref:m},null,8,["postId","mergedPostData"])],64))}};export{_t as default};
